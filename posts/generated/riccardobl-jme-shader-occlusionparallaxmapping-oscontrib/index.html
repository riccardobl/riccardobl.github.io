<!DOCTYPE html>
<html lang="en-us" translate="no" >

<head>
  <script src="/js/openpgp.js"></script>
  <script src="/js/lnurl-pay.js"></script>
  <script src="/js/qrcode.js"></script>
    <link rel="stylesheet" href="/highlight/styles/railscasts.css">
    <script src="/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

  <title>RBLB  | jme-shader-OcclusionParallaxMapping</title>
  <meta name="viewport" content="width=device-width,minimum-scale=1">
  
  <meta name="generator" content="Hugo 0.109.0">
  
  <link rel="stylesheet" href="/css/style.css">
  

  
  <script src="/js/script.js"></script>
  

  
  <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
  

  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,200,0,0" />
  <link rel="stylesheet" href="/css/mobile.css"/><meta name="robots" content="noindex"></head>

<body>
  <progress onload="startCyclingProgressBar()" max=100 value=0 id="pageLoadingProgress"></progress>


   
<fakheader>
    <div id="rblb"></div> 

</fakheader>
<header >
<div>
    <div id="rblb"></div> 
</div>
<div id="board">
    <div>
        <p>
            I am Riccardo Balbo, a freelance developer.
            <br> I develop full stack web applications, software, iot and more.
            <br>
            Feel free to contact me for a quote or for more information.
            
            
            

                <piva>P.IVA 05607610283</piva>

        </p>

    </div>

  

</div>

<div>
    <nav id="rblb">
        <a href="/"><span class="material-symbols-outlined">home</span> Home</a>
        
        <a href="/contacts"><span class="material-symbols-outlined">mail</span> Get in touch</a>
    </nav>
</div>

</header>
 
<main> 
<section class="full">
   
    <article >

    




    <h1 id="occlusionparallaxmapping-for-jmonkeyengine">OcclusionParallaxMapping for jMonkeyEngine</h1>
<p>Usage.</p>
<pre><code class="language-glsl">
//Fragment shader

// Define which channel of the texture is used to store height data (rgba)
#define HEIGHT_MAP R_COMPONENT 
// #define HEIGHT_MAP G_COMPONENT 
// #define HEIGHT_MAP B_COMPONENT    
// #define HEIGHT_MAP A_COMPONENT 
// If the texture contains DEPTH, define the channel using DEPTH_MAP instead of HEIGHT_MAP

// Override texture sampling function
// #define Texture_sample myTextureSample

// Import OcclusionParallax
#import "Shaders/OcclusionParallax.glsllib"

uniform vec3 g_CameraPosition; // camera position in world space
uniform sampler2D m_ParallaxMap; // gray scale height/depth map

in vec3 WPos; // fragment position in world space
in vec3 WNorm; // fragment normal in world space
in vec3 WTang; // fragment tangent in world space
in vec2 TexCoord;

out vec4 outFragColor;
//....
void main(){
  //...
  
  mat3 tbnMat = mat3(WTang.xyz, WTang.w * cross(wNorm, WTang.xyz), wNorm);        
  vec3 viewDir = normalize(g_CameraPosition - WPos);
  vec3 vViewDir =  viewDir * tbnMat;  

  float m_ParallaxHeight=0.3;
  Parallax_initFor(vViewDir,m_ParallaxHeight);
  
  //...
  
  vec2 newTexCoord=TexCoord; // Coordinates to be displaced by the parallax
  Parallax_displaceCoords(newTexCoord,m_ParallaxMap);

  //...
  
  // Displace other coordinates, no need to call Parallax_initFor again.
  // vec2 newTexCoord2=TexCoord2; // Coordinates to be displaced by the parallax
  // Parallax_displaceCoords(newTexCoord2,m_ParallaxMap);
  
  //...

  outFragColor=texture(m_DiffuseMap,newTexCoord);
}
</code></pre>
<p>Example implementation in PBRLighting
<a href="https://github.com/riccardobl/jme-shader-OcclusionParallaxMapping/tree/master/Materials/OcclusionParallax">https://github.com/riccardobl/jme-shader-OcclusionParallaxMapping/tree/master/Materials/OcclusionParallax</a></p>

            <nav  class="h">
               <a rel="noopener noreferrer" href="https://github.com/riccardobl/jme-shader-OcclusionParallaxMapping" target="_blank"><i class="fab fa-github"></i> Github page</a>
            
                <a rel="noopener noreferrer" href="https://jmonkeystore.com/571e75d2-d9c6-4f3f-8b99-3c717bbf42bd" target="_blank">
                <i class="fas fa-home"></i> Homepage</a>
                 </nav>


    <time datetime="2025-10-11 05:58:15 &#43;0000 UTC">11 October 2025</time>

<nav class="tags">
    
    
    
    <a class="glsl" href="/tags/glsl/">#glsl</a>
    
    
    
    
    <a class="opensource-contrib" href="/tags/opensource-contrib/">#opensource-contrib</a>
    
    
    
    
    <a class="glsl" href="/tags/glsl/">#glsl</a>
    
    
    
    
    <a class="jmonkeyengine" href="/tags/jmonkeyengine/">#jmonkeyengine</a>
    
    
    
    
    <a class="occlusion" href="/tags/occlusion/">#occlusion</a>
    
    
    
    
    <a class="parallax" href="/tags/parallax/">#parallax</a>
    
    
    
    
    <a class="shader" href="/tags/shader/">#shader</a>
    
    
    
    
    <a class="unlicense" href="/tags/unlicense/">#unlicense</a>
    
    
</nav>      

</article>      

</section>

</main>
 
</body>

</html>
